!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t.MiniVue=t.MiniVue||{},t.MiniVue.min=e())}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var s=window.console;var r=function(t,e,n){},o=function(t,e){var n=t.$options[e];n&&n.call(t)},u=function(t,e){s[t].call(s,e)},e=0,l=function(){function t(){c(this,t),this.id=e++,this.subs=[]}return a(t,[{key:"addSub",value:function(t){this.subs.push(t)}},{key:"removeSub",value:function(t){for(var e=[0,this.subs.length],n=e[0],i=e[1];n<i;n++)if(this.subs[n].id===t.id){this.subs.splice(n,1);break}}},{key:"depend",value:function(){t.target&&t.target.addDep(this)}},{key:"notify",value:function(){this.subs.slice().map(function(t){return t.update(),t})}}]),t}();l.target=null;var h=[];var d={enumerable:!0,configurable:!0,get:function(){},set:function(){}};function v(n,t,i){var a=new l,e=Object.getOwnPropertyDescriptor(n,t);if(!e||!1!==e.configurable){var s=e&&e.get,r=e&&e.set;s&&!r||2!==arguments.length||(i=n[t]);m(i);Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(n):i;return l.target&&a.depend(),t},set:function(t){var e=s?s.call(n):i;t===e||t!=t&&e!=e||(r?r.call(n,t):i=t,m(t),a.notify())}})}}function p(t,e,n){var i;"function"==typeof n&&(d.get=(i=e,function(){var t=this._computedWatchers&&this._computedWatchers[i];if(t)return t.get(),l.target&&t.depend(),t.value}),d.set=function(){}),Object.defineProperty(t,e,d)}var f=function(){function e(t){c(this,e),this.value=t,this.dep=new l,this.walk(t)}return a(e,[{key:"walk",value:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)v(t,e[n])}}]),e}();function m(t,e){if(t&&"object"===n(t))return new f(t)}var g={endTag:/^<\/((?:[a-zA-Z_][\w\-\.]*\:)?[a-zA-Z_][\w\-\.]*)[^>]*>/,startTagOpen:/^<((?:[a-zA-Z_][\w\-\.]*\:)?[a-zA-Z_][\w\-\.]*)/,startTagClose:/^\s*(\/?)>/,attribute:/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,comment:/^<!\--/,conditionalComment:/^<!\[/,doctype:/^<!DOCTYPE [^>]+>/i,defaultTagRE:/\{\{((?:.|\n)+?)\}\}/g},y=["input","br","hr"],b=function(){function n(t,e){c(this,n),this.vm=t,this.ast={},this.$optins=e,this.$el=document.querySelector(e.el),this.$el.outerHTML&&this.compileToFunctions(this.$el.outerHTML)}return a(n,[{key:"compileToFunctions",value:function(t){this.template=t,this._convertHtml2Ast(),this.render=this._converCode(this.ast)}},{key:"_advance",value:function(t){this.index+=t,this.template=this.template.substring(t)}},{key:"_parseStartTag",value:function(){var t=this.template.match(g.startTagOpen);if(t){var e,n,i={tagName:t[1],attrs:[],start:this.index};for(this._advance(t[0].length);!(e=this.template.match(g.startTagClose))&&(n=this.template.match(g.attribute));)this._advance(n[0].length),i.attrs.push(n);if(e)return i.unarySlash=e[1],this._advance(e[0].length),i.end=this.index,i}}},{key:"_parseEndTag",value:function(){var t=this.stack[this.stack.length-1],e=t.children[t.children.length-1];e&&3===e.type&&" "===e.text&&t.children.pop(),this.stack.length-=1,this.currentParent=this.stack[this.stack.length-1]}},{key:"_handleStartTag",value:function(t){var e=[];this.unary=!!t.unarySlash,t.attrs.map(function(t){e.push({name:t[1],value:t[3]||t[4]||t[5]||""})});var n=this._createASTElement(t,e,this.currentParent);this.ast||(this.ast=n),this.currentParent&&(this.currentParent.children.push(n),n.parent=this.currentParent),!this.unary&&y.indexOf(n.tag)<0&&(this.stack.push(n),this.currentParent=n)}},{key:"_createASTElement",value:function(t,e,n){for(var i,a,s,r,o=/^:(class|style)$/,u=/^(class|style)$/,c={},l={},h=[],d=[],v=[],p=!1,f=0,m=e.length;f<m;f++)c[e[f].name]=e[f].value,e[f].name.match(/^@/g)?(p=!0,l[e[f].name.match(/\w*$/)[0]]={value:e[f].value}):u.test(e[f].name)?-1<e[f].name.indexOf("class")?i=e[f].value:a=e[f].value:o.test(e[f].name)?-1<e[f].name.indexOf(":class")?r=e[f].value:s=e[f].value:"v-model"===e[f].name?(p=!0,l.input={value:"function($event){if($event.target.composing)return;".concat(e[f].value,"=$event.target.value}")},d.push({name:"value",value:"(".concat(e[f].value,")")}),v.push({arg:null,modifiers:void 0,name:"model",rawName:"v-model",value:e[f].value})):h.push({name:e[f].name,value:e[f].value});var g={type:1,tag:t.tagName,attrsList:e,attrsMap:c,parent:n,children:[]};return p&&(g=Object.assign({},g,{event:l}),d.length&&(g=Object.assign({},g,{props:d,directives:v}))),h.length&&(g=Object.assign({},g,{attrs:h})),i&&(g=Object.assign({},g,{staticClass:i})),a&&(g=Object.assign({},g,{staticStyle:a})),s&&(g=Object.assign({},g,{styleBinding:s})),r&&(g=Object.assign({},g,{classBinding:r})),g}},{key:"_makeAttrsMap",value:function(t){for(var e={},n=0,i=t.length;n<i;n++)e[t[n].name]=t[n].value;return e}},{key:"_chars",value:function(t){if(this.currentParent){var e,n=this.currentParent.children;if(t=t.trim())" "!==t&&(e=this._parseText(t))?n.push({type:2,expression:e.expression,tokens:e.tokens,text:t}):" "===t&&n.length&&" "===n[n.length-1].text||n.push({type:3,text:t})}}},{key:"_parseText",value:function(t){if(g.defaultTagRE.test(t)){for(var e,n,i,a=[],s=[],r=g.defaultTagRE.lastIndex=0;e=g.defaultTagRE.exec(t);){r<(n=e.index)&&(s.push(i=t.slice(r,n)),a.push(JSON.stringify(i)));var o=e[1].trim();a.push("_s("+o+")"),s.push({"@binding":o}),r=n+e[0].length}return r<t.length&&(s.push(i=t.slice(r)),a.push(JSON.stringify(i))),{expression:a.join("+"),tokens:s}}}},{key:"_convertHtml2Ast",value:function(){for(this.ast=null,this.stack=[],this.index=0;this.template;){var t,e=this.template.indexOf("<");if(0===e){if(g.comment.test(this.template)){var n=this.template.indexOf("--\x3e");this._advance(n+3);continue}var i=this.template.match(g.endTag);if(i){var a=this.index;this._advance(i[0].length),this._parseEndTag(i[1],a,this.index);continue}var s=this._parseStartTag();if(s){this._handleStartTag(s);continue}}0<=e&&(t=this.template.substring(0,e),this._advance(e)),e<0&&(t=this.template,this.template=""),t&&this._chars(t)}}},{key:"_converCode",value:function(t){var e=this._setGenCode(t),n=this._getChildren(t);return t.tag||2!==t.type?t.tag||3!==t.type?"_c('"+t.tag+"'"+(e?","+e:"")+(n?","+n:"")+")":'_v("'.concat(t.text,'")'):"_v(".concat(t.expression,")")}},{key:"_setGenCode",value:function(t){var e="{";return t.staticClass&&(e+='staticClass:"'.concat(t.staticClass,'",')),t.classBinding&&(e+="class:".concat(t.classBinding,",")),t.staticStyle&&(e+='staticStyle:"'.concat(t.staticStyle,'",')),t.styleBinding&&(e+="style:".concat(t.styleBinding,",")),t.attrs&&(e+="attrs:{".concat(this._genProps(t.attrs),"},")),t.event&&(e+="on:{".concat(this._genHandlers(t.event),"},")),t.directives&&(e+="directives:".concat(this._genDirectives(t.directives),",")),t.props&&(e+="domProps:{".concat(this._genProps(t.props,!0),"},")),e=e.replace(/,$/,"")+"}",/^\{\}$/.test(e)&&(e=""),e}},{key:"_genProps",value:function(t,e){for(var n="",i=0;i<t.length;i++){var a=t[i];n+=e?'"'+a.name+'":'+a.value+",":'"'+a.name+'":"'+a.value+'",'}return n.slice(0,-1)}},{key:"_genHandlers",value:function(t){var e="";for(var n in t)e+='"'+n+'":'+t[n].value+",";return e.slice(0,-1)}},{key:"_genDirectives",value:function(n){var i="[";return n.map(function(t,e){i+='{name:"'.concat(t.name,'",rawName:"').concat(t.rawName,'",value:(').concat(t.value,'),expression:"').concat(t.value,'"}').concat(e===n.length-1?"]":",")}),i}},{key:"_getChildren",value:function(t){var e=this,n=t.children;if(n&&n.length)return"["+n.map(function(t){return e._converCode(t)})+"]"}}]),n}(),k=0,_=function(){function i(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:r;c(this,i),this.vm=t,this.id=k++,this.expression=e.toString(),this.newDepIds=new Set,this.newDeps=[],this.depIds=new Set,this.deps=[],this.cb=n,"function"==typeof e?this.getter=e:u("error",this.expression+"Not a function")}return a(i,[{key:"get",value:function(){var t;t=this,l.target&&h.push(l.target),l.target=t;var e=this.getter.call(this.vm,this.vm);return l.target=h.pop(),this.cleanupDeps(),this.value=e}},{key:"addDep",value:function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))}},{key:"cleanupDeps",value:function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0}},{key:"depend",value:function(){for(var t=this.deps.length;t--;)this.deps[t].depend()}},{key:"update",value:function(){this.run()}},{key:"run",value:function(){var t=this.get();if(t!==this.value){var e=this.value;this.value=t,this.cb.call(this.vm,t,e)}}}]),i}();var w={createElement:function(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}};function x(t){function a(){var t=arguments,e=a.fns;if(!Array.isArray(e))return e.apply(null,arguments);for(var n=e.slice(),i=0;i<n.length;i++)n[i].apply(null,t)}return a.fns=t,a}var S=function(){function s(t,e,n,i,a){c(this,s),this.vm=t,i&&o(t,"beforeUpdate"),this.prevVnode=i||{data:{}},this.createElement(n,a,i),this.removeVnodes(e)}return a(s,[{key:"path",value:function(){return!0}},{key:"removeVnodes",value:function(t){w.removeChild(t.parentNode,t)}},{key:"createElement",value:function(t,e){this.path(),e||(e=document.querySelector("body"));var n=t.data,i=t.children,a=t.tag;t.elm=a?w.createElement(a,t):w.createTextNode(t.text),this.createChildren(t,i),n&&(this.updateAttrs(this.prevVnode,t),this.updateClass(this.prevVnode,t),this.updateDOMListeners(this.prevVnode,t),this.updateStyle(this.prevVnode,t)),void 0===e&&null===e||w.appendChild(e,t.elm)}},{key:"createChildren",value:function(t,e){if(Array.isArray(e))for(var n=[0,e.length],i=n[0],a=n[1];i<a;i++)this.createElement(e[i],t.elm)}},{key:"updateAttrs",value:function(t,e){var n,i=e.elm,a=t.data.attrs||{},s=e.data.attrs||{};for(var r in e.data.domProps&&(s=Object.assign({},s,e.data.domProps)),s)n=s[r],a[r],i.setAttribute(r,n)}},{key:"updateClass",value:function(t,e){var n=e.elm,i=(t.data.staticClass,e.data.staticClass||""),a=(t.data.class,e.data.class||"");if(i||a){var s=[].concat(i,a);n.setAttribute("class",s.join(" "))}}},{key:"updateDOMListeners",value:function(t,e){var n,i=e.data.on||{};t.data.on;for(var a in i)n=x(i[a]),e.elm.addEventListener(a,n,!1)}},{key:"updateStyle",value:function(t,e){var n=e.elm,i=(t.data.staticStyle,e.data.staticStyle||""),a=(t.data.style,e.data.style||{}),s=i.split(";");for(var r in s&&s.length&&s.map(function(t){var e=t.split(":");e&&e.length&&(n.style[e[0]]=e[1])}),a)n.style[r]=a[r]}}]),s}(),C=function(){function u(t,e,n,i,a,s,r,o){c(this,u),this.tag=t,this.data=e,this.children=n,this.text=i,this.elm=a,this.ns=void 0,this.context=s,this.functionalContext=void 0,this.key=e&&e.key,this.componentOptions=r,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1}return a(u,[{key:"child",value:function(){return this.componentInstance}}]),u}();function t(t){return new C(void 0,void 0,void 0,String(t))}function O(t,e,n,i){var a;if(e||function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=new C;e.text=t,e.isComment=!0}(),Array.isArray(n)&&(i=n,n=void 0),"string"==typeof e&&(a=new C(e,n,i,void 0,void 0,t)),void 0!==a)return a}var T=0;return function(){function e(t){if(c(this,e),(this instanceof e?this.constructor:void 0)!==e)throw new Error("必须使用 new 命令生成实例");this.id=T++,(this._self=this).$options=t,this.init(t)}return a(e,[{key:"init",value:function(){var a=this;o(a,"beforeCreated"),this._c=function(t,e,n,i){return O(a,t,e,n)},this._v=t,this._s=function(t){return t.toString()},this._initData(),this._initComputed(),this._initMethod(),this.mounted()}},{key:"proxy",value:function(t,e,n){var i=this;Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){return i[e][n]},set:function(t){i[e][n]=t}})}},{key:"_initData",value:function(){var t=this.$options.data;t=this._data="function"==typeof t?t.call(this):t||{};for(var e=Object.keys(t),n=e.length;n--;){var i=e[n];this.proxy(this,"_data",i)}m(t)}},{key:"_initMethod",value:function(){for(var t in this.$options.methods)this[t]=null==this.$options.methods[t]?noop:this.$options.methods[t].bind(this)}},{key:"_initComputed",value:function(){var t=function(){},e=this._computedWatchers=Object.create(null);if(this.$options.computed)for(var n in this.$options.computed){var i=this.$options.computed[n];e[n]=new _(this,i,t),n in this||p(this,n,i)}}},{key:"mounted",value:function(){var n=this;if(o(n,"created"),this.$options.el){o(n,"beforeMount");var t=new b(n,this.$options);this.$options.render=new Function("with(this){return "+t.render+"}");new _(n,function(){var t=n._vnode,e=document.querySelector(this.$options.el);n.vnode=n.$options.render.call(n),n._vnode=n.vnode,new S(n,e,n.vnode,t,null)},function(){}).get(),o(n,"mounted")}}}]),e}()});